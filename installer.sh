#!/usr/bin/env bash
# Simple script for adding additional tools to a standard Kali pentest image
# 2020 WeakNet Labs
#
# I need to be root, even SUDO works here:
if [[ $(whoami) != "root" ]]
then
	printf "This script requires root access\n";
	exit 1337
fi
COLOR="\e[38;5;130m"
ERROR="\e[38;5;196m"
RST="\x1b[0m"
# ---------------------
# Update:
# ---------------------
printf "$COLOR * Updating repositories $RST\n";
apt update 1>/dev/null || (printf "An internet connection is required for this script.\n" && exit 1337)
apt -y upgrade 1>/dev/null
# ---------------------
# Install Impacket:
# ---------------------
printf "$COLOR * Installing Impacket $RST\n"
mkdir /pentest && cd /pentest || printf "$ERROR [ERROR] FAILED TO MAKE DIRECTORY /PENTEST $RST\n"
git clone https://github.com/SecureAuthCorp/impacket
cd /pentest/impacket && pip install . || printf "$ERROR [ERROR] FAILED TO INSTALL Impacket with PIP $RST\n"
# ---------------------
# Install EyeWitness:
# ---------------------
printf "$COLOR * Installing EyeWitness $RST\n"
apt install eyewitness -y
# ---------------------
# Install BloodHound:
# ---------------------
printf "$COLOR * Installing Bloodhound $RST\n"
apt install -y bloodhound
# ---------------------
# Install mitm6:
# ---------------------
printf "$COLOR * Installing MITM6 $RST\n"
cd /pentest && git clone https://github.com/fox-it/mitm6
cd /pentest/mitm6 && pip install -r requirements.txt || printf "$ERROR [ERROR] FAILED TO INSTALL MITM6 REQUIREMENTS $RST\n"
cd /pentest/mitm6 && python setup.py install || printf "$ERROR [ERROR] FAILED TO INSTALL MITM6 $RST\n"
# ---------------------
# Install CrackMapExec:
# ---------------------
printf "$COLOR * Installing CrackMapExec $RST\n"
apt -y install crackmapexec
# ---------------------
# Install EavesARP:
# ---------------------
printf "$COLOR * Installing EavesARP $RST\n"
apt -y install python3-pip
cd /pentest && git clone https://github.com/arch4ngel/eavesarp
cd /pentest/eavesarp && pip3 install -r requirements.txt || printf "$ERROR [ERROR] FAILED TO INSTALL EAVESARP REQUIREMENTS $RST\n"
